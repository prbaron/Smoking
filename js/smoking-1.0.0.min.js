/*
	smokings.js
	---------------------

	@file 		smoking-1.0.0.min.js
	@version 	1.0.0
	@date 		November 2011
	@url		http://prbaron.free.fr/smoking/js/smoking-1.0.0.js
	@author 	Pierre Baron <prbaron22@gmail.com>
	
	This work is licensed under a Creative Commons Attribution 3.0 Unported License.
*/

(function(a){function j(){if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)){return true}else return false}function i(b,c,d){b.css("opacity","0");a("<div class='skg-"+c+"' >").insertAfter(b);var e=b.next(".skg-"+c+"");if(d!==undefined)e.attr("id",d+"Smoking");if(c==="radio"||c==="checkbox"){e.css({display:"inline-block",position:"absolute",left:b.offset().left,top:b.offset().top}).insertAfter(b);if(b.attr("disabled")=="disabled"){e.removeClass("checked").addClass("disabled")}else if(b.attr("checked")=="checked"){e.addClass("checked")}}else if(c==="select"||c==="file"){b.css({"margin-top":e.outerHeight()/2,position:"absolute","z-index":"-1"})}return e}function h(){b.find("input[type='file']").each(function(){var b=a(this);var d=i(b,"file",b.attr("id"));if(j())d.addClass("disabled");var e=a("<a href='#' class='skg-file-button'>").css("display","inline-block").text(c.fileButtonText).appendTo(d);var f=a("<span class='skg-file-text'>").text(c.fileText);switch(c.fileButtonPosition){case"left":f.insertAfter(e);break;case"right":f.insertBefore(e);break;case"top":f.insertAfter(e).before("<br/>");break;case"bottom":f.insertBefore(e).after("<br/>");break}d.children("a.skg-file-button").click(function(a){b.click();a.preventDefault()});b.change(function(){var a=b.val().split("\\");var c=a[a.length-1];d.children(".skg-file-text").empty().text(a[a.length-1])})})}function g(){b.find("select").each(function(){var b=a(this);var c=i(b,"select",b.attr("id"));a("<a href='#' class='skg-select-button'>").css("display","block").appendTo(c).text(b.children("option:selected").text());var d=c.children("a.skg-select-button");a("<span class='skg-select-arrow'>").appendTo(d);d.click(function(e){if(j()){b.trigger("focus")}else{var f=0;var g=d.outerWidth();a("<span>").appendTo(c).hide();b.children("option").each(function(){c.children("span").text(a(this).text());if(c.children("span").outerWidth()>g)g=c.children("span").outerWidth();f++});c.children("span").remove();b.trigger("focus").attr("size",f).css({opacity:"1",width:g,"z-index":"0"})}e.preventDefault()});b.bind("click, change",function(){d.empty().text(b.children("option:selected").text());b.trigger("blur").attr("size",1).css({opacity:"0",width:d.width(),"z-index":"-1"});a("<span class='skg-select-arrow'>").appendTo(d)})})}function f(){b.find("input[type='radio']").each(function(){var b=a(this);var c=i(b,"radio",b.attr("id"));c.click(function(){if(!c.hasClass("disabled")){b.trigger("click");c.addClass("checked");var d=b.attr("name");var e=b.attr("value");a("input[type='radio'][name='"+d+"']").each(function(){var b=a(this);var c=b.next(".skg-radio");if(c.hasClass("checked")&&b.attr("value")!=e){c.removeClass("checked")}})}})})}function e(){b.find("input[type='checkbox']").each(function(){var b=a(this);var c=i(b,"checkbox",b.attr("id"));c.click(function(){if(!c.hasClass("disabled")){c.toggleClass("checked");b.attr("checked")=="checked"?b.removeAttr("checked"):b.attr("checked","checked")}})})}function d(){if(c.activeCheckbox)e();if(c.activeRadio)f();if(c.activeSelect)g();if(c.activeFile)h()}var b;var c;a.smoking=function(a,b){};var c={activeCheckbox:true,activeFile:true,activeRadio:true,activeSelect:true,fileButtonPosition:"left",fileButtonText:"Choose file",fileText:"No file Selected"};a.fn.smoking=function(e){return this.each(function(){b=a(this);c=a.extend({},c,e);d()})}})(jQuery)